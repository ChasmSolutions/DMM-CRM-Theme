'use strict';$(document).on("click",'.dismiss-all',function(){var _this=this;$(this).addClass('loading');var id=$(this).data('id');makeRequestOnPosts('POST','contacts/'+id+'/dismiss-duplicates',{'id':'all'}).then(function(){$('#contact_'+id).remove();$(_this).removeClass('loading');});});var get_duplicates=function get_duplicates(){var limit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;window.makeRequest("GET","contacts/all-duplicates",{limit:limit},"dt-posts/v2/").then(function(response){var html='';response.posts_with_matches.forEach(function(post){var inner_html='';window.lodash.forOwn(post.dups,function(dup_values,dup_key){inner_html+='<div style="display: flex"><div style="flex-basis: 100px"><strong>'+window.lodash.escape(dup_key)+'</strong></div><div>';dup_values.forEach(function(dup){inner_html+='<a target="_blank" href="contacts/'+window.lodash.escape(dup.ID)+'" style="margin: 0 10px 0 5px">\n            '+window.lodash.escape(dup.post_title)+': '+(dup.field==="post_title"?"":window.lodash.escape(dup.value))+' (#'+window.lodash.escape(dup.ID)+')\n          </a>';});inner_html+='</div></div>';});var channels=post.info.map(function(info){return info.value?info.value:null;}).join(", ");html+='\n        <div class="bordered-box cell" id="contact_'+window.lodash.escape(post.ID)+'">\n          <a style="color: #3f729b; font-size: 1.5rem;" target="_blank" href="contacts/'+window.lodash.escape(post.ID)+'">\n            '+window.lodash.escape(post.post_title)+' (#'+window.lodash.escape(post.ID)+')\n          </a>\n          <div class="label" style="display:inline-block; background: '+window.lodash.escape(post.overall_status.color)+'">'+window.lodash.escape(post.overall_status.label)+'</div>\n          <div style="display:inline-block;">'+window.lodash.escape(channels)+'</div>\n          <h4 style="margin-top:20px">'+window.lodash.escape(window.view_duplicates_settings.translations.matches_found)+'</h4>\n          <div>'+inner_html+'</div>\n\n          <button class="button hollow dismiss-all loader" data-id="'+window.lodash.escape(post.ID)+'"  style="margin-top:20px">\n            '+window.lodash.escape(window.view_duplicates_settings.translations.dismiss_all.replace('%s',post.post_title))+'\n          </button>\n        </div>\n      ';});$('#duplicates-content').append(html);$('#scanned_number').html(window.lodash.escape(response.scanned));var found=$('#duplicates-content .bordered-box').length;$('#found_text').html(window.lodash.escape(found));if(found<100){get_duplicates(response.scanned);}else{$('.loading-spinner').removeClass("active");}});};get_duplicates(0);