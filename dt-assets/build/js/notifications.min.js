function get_new_notification_count(){return makeRequest("post","notifications/get_new_notifications_count").done((data=>{data>0?jQuery(".notification-count").text(data).show().css("display","inline-block"):jQuery(".notification-count").hide()})).fail(handleAjaxError)}setTimeout(get_new_notification_count,2e3);const notificationRead=notification_id=>`\n  <a id="read-button-${window.lodash.escape(notification_id)}" class="read-button button hollow small" style="border-radius:100px; margin: .7em 0 0;"\n      onclick="mark_unread( ${window.lodash.escape(notification_id)} )">\n      \x3c!--<i class="fi-minus hollow"></i>--\x3e\n   </a>\n`,notificationNew=notification_id=>`\n  <a id="new-button-${window.lodash.escape(notification_id)}" class="new-button button small" style="border-radius:100px; margin: .7em 0 0;"\n     onclick="mark_viewed( ${window.lodash.escape(notification_id)} )">\n     \x3c!--<i class="fi-check"></i>--\x3e\n  </a>\n`;function mark_viewed(notification_id){return makeRequest("post","notifications/mark_viewed/"+notification_id).done((()=>{get_new_notification_count(),jQuery(`#row-${notification_id} .notification-row`).removeClass("unread-notification-row"),jQuery("#toggle-area-"+notification_id).html(notificationRead(notification_id))})).fail(handleAjaxError)}function mark_unread(notification_id){return makeRequest("post","notifications/mark_unread/"+notification_id).done((()=>{get_new_notification_count(),jQuery(`#row-${notification_id} .notification-row`).addClass("unread-notification-row"),jQuery("#toggle-area-"+notification_id).html(notificationNew(notification_id))})).fail(handleAjaxError)}function mark_all_viewed(){const id=wpApiNotifications.current_user_id;return makeRequest("post","notifications/mark_all_viewed/"+id).done((()=>{get_new_notification_count(),jQuery(".new-cell").html(notificationRead(id))})).fail(handleAjaxError)}function notification_template(id,note,is_new,pretty_time){let button="",label="";return"1"===is_new?(button=notificationNew(id),label="new-cell"):button=notificationRead(id),`\n    <div class="cell" id="row-${id}">\n      <div class="grid-x grid-margin-x grid-padding-y bottom-border notification-row ${"1"===is_new?"unread-notification-row":""} ">\n\n        <div class="auto cell">\n           ${note}<br>\n           <span><small><strong>${window.lodash.escape(pretty_time[0])}</strong> | ${window.lodash.escape(pretty_time[1])}</small></span>\n        </div>\n        <div class="small-2 medium-1 cell padding-5 ${window.lodash.escape(label)}" id="toggle-area-${window.lodash.escape(id)}">\n            ${button}\n        </div>\n      </div>\n    </div>`}let all_offset,new_offset,page,all=!0,limit=20;function get_notifications(all,reset){return!0===all?(new_offset=0,0!==all_offset&&all_offset?all_offset===limit?(page=limit,all_offset=limit+limit):(page=all_offset+limit,all_offset+=limit):(page=0,all_offset=limit)):(all_offset=0,0!==new_offset&&new_offset?new_offset===limit?(page=limit,new_offset=limit+limit):(page=new_offset+limit,new_offset+=limit):(page=0,new_offset=limit)),!0===reset?page=0:!1===reset&&(page+=1),makeRequest("post","notifications/get_notifications",{all:all,page:page,limit:limit}).done((data=>{data?(reset&&jQuery("#notification-list").empty(),jQuery.each(data,(function(i,item){jQuery("#notification-list").append(notification_template(data[i].id,data[i].notification_note,data[i].is_new,data[i].pretty_time))}))):(!0!==all||0!==all_offset&&all_offset)&&(!1!==all||0!==new_offset&&new_offset)?(reset&&jQuery("#notification-list").html(`<div class="cell center empty-notification-message">${window.lodash.escape(wpApiNotifications.translations["no-unread"])}</div>`),jQuery("#next-all").hide(),jQuery("#next-new").hide()):(jQuery("#notification-list").html(`<div class="cell center empty-notification-message">${window.lodash.escape(wpApiNotifications.translations["no-notifications"])}</div>`),jQuery("#next-all").hide(),jQuery("#next-new").hide())})).fail(handleAjaxError)}function toggle_buttons(state){"all"===state?(jQuery("#all").attr("class","button"),jQuery("#new").attr("class","button hollow"),jQuery("#next-all").show(),jQuery("#next-new").hide()):(jQuery("#all").attr("class","button hollow"),jQuery("#new").attr("class","button"),jQuery("#next-all").hide(),jQuery("#next-new").show())}
//# sourceMappingURL=notifications.min.js.map
